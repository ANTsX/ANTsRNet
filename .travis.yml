# R for travis: see documentation at https://docs.travis-ci.com/user/languages/r
language: r

dist: xenial
sudo: false
warnings_are_errors: false # setting this false b/c of rcpp attribute error

env:
  - KERAS_BACKEND="tensorflow"
  - KERAS_IMPLEMENTATION="tensorflow"

cache:
  packages: true
  directories:
    - $HOME/.keras
    - $HOME/.cache/pip

before_install:
  - export PACKAGE_NAME=ANTsRNet
  - wget -O travis_helpers.sh http://bit.ly/travis_helpers
  - source travis_helpers.sh
  - rm travis_helpers.sh
  - echo "YESSAH"
  - Rscript -e 'install.packages("rsvd")'
  - Rscript -e 'install.packages("magic")'
  - Rscript -e 'install.packages("psych")'
  - Rscript -e 'install.packages("RcppEigen")'
  - gh_binary_install  stnava/ITKR ANTsX/ANTsRCore ANTsX/ANTsR

before_script:
  - pip install --upgrade pip
  - pip install --upgrade --user pip
  - pip install --upgrade --ignore-installed --user travis setuptools wheel virtualenv
  - pip install --upgrade --ignore-installed --user travis pyyaml
  - pip install --upgrade --ignore-installed --user travis requests Pillow scipy
  - pip install --upgrade --ignore-installed --user travis Pillow scipy
  - pip install --upgrade --ignore-installed --user travis scipy
  - pip install --ignore-installed --user travis h5py
  - pip install --ignore-installed --user travis keras
  - R -e 'tensorflow::install_tensorflow()'
