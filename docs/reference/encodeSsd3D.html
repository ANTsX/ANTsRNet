<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Encoding function for 3-D Y_train — encodeSsd3D • ANTsRNet</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Encoding function for 3-D Y_train — encodeSsd3D" />

<meta property="og:description" content="Function for translating the min/max ground truth box coordinates to
something expected by the SSD network.  This is a SSD-specific analog
for keras::to_categorical().  For each image in the batch, we compare
the ground truth boxes for that image with all the anchor boxes.  If
the overlap measure exceeds a specific threshold, we write the ground
truth box coordinates and class to the specific position of the matched
anchor box.  Note that the background class will be assigned to all the
anchor boxes for which there was no match with any ground truth box.
However, an exception to this are the anchor boxes whose overlap measure
is higher that the specified negative threshold." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ANTsRNet</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Encoding function for 3-D Y_train</h1>
    
    <div class="hidden name"><code>encodeSsd3D.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Function for translating the min/max ground truth box coordinates to
something expected by the SSD network.  This is a SSD-specific analog
for <span class="pkg">keras::to_categorical()</span>.  For each image in the batch, we compare
the ground truth boxes for that image with all the anchor boxes.  If
the overlap measure exceeds a specific threshold, we write the ground
truth box coordinates and class to the specific position of the matched
anchor box.  Note that the background class will be assigned to all the
anchor boxes for which there was no match with any ground truth box.
However, an exception to this are the anchor boxes whose overlap measure
is higher that the specified negative threshold.</p>
    
    </div>

    <pre class="usage"><span class='fu'>encodeSsd3D</span>(<span class='no'>groundTruthLabels</span>, <span class='no'>anchorBoxes</span>, <span class='no'>imageSize</span>, <span class='kw'>variances</span> <span class='kw'>=</span> <span class='fu'>rep</span>(<span class='fl'>1</span>,
  <span class='fl'>6</span>), <span class='kw'>foregroundThreshold</span> <span class='kw'>=</span> <span class='fl'>0.5</span>, <span class='kw'>backgroundThreshold</span> <span class='kw'>=</span> <span class='fl'>0.2</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>groundTruthLabels</th>
      <td><p>A list of length <code>batchSize</code> that contains one
2-D array per image.  Each 2-D array has k rows where each row corresponds
to a single box consisting of the format (classId,xmin,xmax,ymin,ymax,zmin,zmax).
Note that <code>classId</code> must be greater than 0 since 0 is reserved for the
background label.</p></td>
    </tr>
    <tr>
      <th>anchorBoxes</th>
      <td><p>a list of 2-D arrays where each element comprises the
anchor boxes for a specific aspect ratios layer.  The row of each 2-D array
comprises a single box specified in the for (xmin,xmax,ymin,ymax,zmin,zmax).</p></td>
    </tr>
    <tr>
      <th>imageSize</th>
      <td><p>3-D vector specifying the spatial domain of the input
images.</p></td>
    </tr>
    <tr>
      <th>variances</th>
      <td><p>A list of 6 floats &gt; 0 with scaling factors (actually it's
not factors but divisors to be precise) for the encoded predicted box
coordinates. A variance value of 1.0 would apply no scaling at all to the
predictions, while values in (0,1) upscale the encoded predictions and
values greater than 1.0 downscale the encoded predictions. These are the same
variances used to construct the model. Default =
<code>c( 1.0, 1.0, 1.0, 1.0, 1.0, 1.0 )</code></p></td>
    </tr>
    <tr>
      <th>foregroundThreshold</th>
      <td><p>float between 0 and 1 determining the min threshold
for matching an anchor box with a ground truth box and, thus, labeling an anchor
box as a non-background class.  If an anchor box exceeds the <code>backgroundThreshold</code>
but does not meet the foregroundThreshold for a ground truth box, then it is ignored
during training.  Default = 0.5.</p></td>
    </tr>
    <tr>
      <th>backgroundThreshold</th>
      <td><p>float between 0 and 1 determining the max threshold
for labeling an anchor box as <code>background</code>.  If an anchor box exceeds the
<code>backgroundThreshold</code> but does not meet the foregroundThreshold for a ground
truth box, then it is ignored during training.  Default = 0.2.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a 3-D array of shape (<code>batchSize</code>, <code>numberOfBoxes</code>,
<code>numberOfClasses</code> + 6 + 6 + 6)
where the additional 6's along the third dimension correspond to
the 6 predicted box coordinate offsets, the 6 coordinates for
the anchor boxes, and the 6 variance values.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This particular implementation was heavily influenced by the following
python and R implementations:</p>
<p><a href='https://github.com/pierluigiferrari/ssd_keras'>https://github.com/pierluigiferrari/ssd_keras</a>
<a href='https://github.com/rykov8/ssd_keras'>https://github.com/rykov8/ssd_keras</a>
<a href='https://github.com/gsimchoni/ssdkeras'>https://github.com/gsimchoni/ssdkeras</a></p>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
          </ul>

    <h2>Author</h2>
    
Tustison NJ

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Nicholas J Tustison, Brian B Avants.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

